@model FamilyTree.ViewModels.PersonViewModel

<div class="person @(Model.Marriages.Any() ? "" : "no-marriages")" id="@Model.GetHandle()">
	<div class="details details-popup @Model.GenderCss">
		<a href="@Model.GetPhotoUri(Url)" target="_photo">
			<img data-src="@Model.GetPhotoUri(Url, height: 50)" height="50" />
		</a>
		<span>@Model.FirstName</span>
		@if (!string.IsNullOrEmpty(Model.Nickname))
		{
			<span>'@Model.Nickname'</span>
		}
		@if (Model.HasOtherTree && Model.IsForAnotherFamily(Url))
		{
			<a href="@Model.GetUrl(Url)">@Model.LastName</a>
		}
		else
		{
			<span>@Model.LastName</span>
		}

		@if (Model.Birth != null && Model.Birth.Date.HasValue)
		{
			<span>
				Birth:
				@Model.Birth.DateFormatted
				@if (Model.Birth.Location != null)
				{
					<span>
						(@Model.Birth.Location)
					</span>
				}
			</span>
		}
		@if (Model.Death != null && Model.Death.Date.HasValue)
		{
			<span>
				Death:
				@Model.Death.DateFormatted
				@if (Model.Death.Location != null)
				{
					<span>
						(@Model.Death.Location)
					</span>
				}
			</span>
		}
	</div>
	<div class="details @Model.GenderCss">
		<img data-src="@Model.GetPhotoUri(Url, height: 50)" height="50" />
		@if (!string.IsNullOrEmpty(Model.Nickname))
		{
			<span>'@Model.Nickname'</span>
		}
		else
		{
			<span>@Model.FirstName</span>
		}
		@if (Model.HasOtherTree && Model.IsForAnotherFamily(Url))
		{
			<a href="@Model.GetUrl(Url)">@Model.LastName</a>
		}
		else
		{
			<span>@Model.LastName</span>
		}
	</div>
</div>